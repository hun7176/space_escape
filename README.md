# 🚀 라즈베리파이 IMU 게임 컨트롤러  
**I2C, GPIO, 쓰레드, 소켓 프로그래밍을 활용한 실시간 멀티플레이 "우주선 피하기" 게임**

## 📌 개요 (Overview)
이 프로젝트는 IMU 센서와 물리 버튼으로 구성된 모션 기반 게임 컨트롤러를 구현하고, 두 개의 라즈베리파이를 소켓 통신으로 연결하여 실시간 경쟁 게임을 만드는 시스템입니다. I2C 및 GPIO를 통해 하드웨어 입력을 처리하며, 직접 작성한 커널 모듈로 IMU 장치를 `/dev` 인터페이스로 제공합니다.

## 🎯 주제 선정 동기 (Motivation)
- 시스템 소프트웨어에서 중요한 **외부 디바이스 드라이버 설계** 경험을 쌓기 위해
- **쓰레드와 소켓 통신** 같은 시스템 프로그래밍 요소들을 실제 프로젝트에 적용해보기 위해
- 재미있고 직관적인 **임베디드 기반 게임**을 만들어보기 위해 이 주제를 선택했습니다

## 🕹️ 게임 설명: 우주선 피하기
플레이어는 IMU 센서를 활용해 우주선을 좌우로 움직이며 위에서 떨어지는 운석을 피해야 합니다.  
- **좌우 이동**: IMU 센서를 기울여 움직임을 감지  
- **일시정지**: 버튼을 눌러 일시정지 상태 전환  
- **멀티플레이**: 두 컨트롤러가 소켓으로 연결되어 경쟁 플레이 가능  

## 🔧 시스템 구조
- **입력 장치**
  - IMU 센서 → I2C 커널 드라이버 → `/dev/imu_dev`로 연결
  - 버튼 → GPIO + `poll()` 기반으로 이벤트 감지
- **쓰레드 처리**
  - 별도의 쓰레드에서 IMU 데이터를 비동기적으로 계속 읽어옴
- **소켓 통신**
  - 클라이언트와 서버 구조로 구현하여 두 라즈베리파이가 게임 상태를 실시간으로 주고받음
- **게임 로직**
  - 사용자 공간에서 장치 파일을 읽어 게임 상태 업데이트 및 그래픽 처리

## ⚙️ 주요 기능
1. **IMU 센서와 버튼으로 이루어진 컨트롤러 설계**  
   I2C 및 GPIO로 신호를 처리하고, 커널 드라이버를 통해 `/dev` 인터페이스 제공
2. **쓰레드 기반 입력 처리**  
   IMU 데이터를 `pthread`로 비동기 처리하여 메인 로직과 분리된 입력 처리 구현
3. **소켓 통신을 통한 실시간 멀티플레이**  
   두 명의 플레이어가 네트워크를 통해 실시간 경쟁할 수 있도록 TCP 소켓 기반 구조 구현

## 🧪 개발 환경
- Raspberry Pi 3 Model B
- Ubuntu Server 24.04 LTS (ARM64)
- C, Makefile, Linux 커널 모듈
- I2C 기반 IMU 센서 (예: MPU6050)
- GPIO 버튼 입력

## 📝 TODO
- [ ] 커널 드라이버 완성 및 `/dev` 노드 생성
- [ ] IMU 입력 쓰레드 구현
- [ ] 버튼 이벤트 처리 (`poll`)
- [ ] 소켓 기반 통신 구현 (TCP)
- [ ] 게임 화면 출력 및 상태 동기화

## 🗓️ Version History

### v0.1.0
- 초기 버전: 간단한 게임 테스트 UI 도입    
  - 기본 Life/Score/Level 표시
  - 우주선, 장애물, 탄환 구현

### v0.2.0
- 컨트롤러 테스트 스레드 추가 및 난이도 밸런스 조정  
- 메인, 게임 랜더링 스레드 통합  

### v0.3.0
- 프로젝트 폴더 구조 재정비 및 소스 파일 정리  

### v0.4.0 
- 소켓 프로그래밍용 로직 구현
- 테스트용 서버·클라이언트 코드 추가  
- (테스트) 네트워크 스레드 주기적 점수 전송 기능 추가  

### v0.5.0 (MAJOR)
- 서버 메시징 리팩터링 
- 2인 로비 대기 시스템 구현  
- 서버로직 리펙터링 및 네트워크용 구조체 추가  

### v0.6.0
- UI 깜빡임 감소 및 네트워크 오류 처리 개선  
- 서버 에러 핸들링 강화 및 자잘한 버그 수정  

### v0.7.0
- 게임: UI 개선 (멀티플레이 대기 화면 도입)  
- 버그: 각종 UI·점수 동기화 버그 개선  
- 서버: 게임 도중 플레이어 서버 이탈 시 핸들링 로직 추가  

## 🙌 기여 및 문의
이 프로젝트는 경북대학교 시스템 소프트웨어 수업의 과제로 진행되었습니다.   
